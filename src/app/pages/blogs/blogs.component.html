<section class="blogs">
  <header class="blogs__header">
    <h1 class="blogs__title">{{ header.title }}</h1>
    <p class="blogs__subtitle">{{ header.subtitle }}</p>
  </header>

  <div class="blogs__controls">
    <!-- Search Bar -->
    <div class="blogs__search">
      <span class="material-icons search-icon">search</span>
      <input type="text" placeholder="Search articles..." [value]="searchQuery" (input)="onSearch($event)"
        aria-label="Search articles" />
    </div>

    <!-- Tag Filter -->
    <div class="blogs__filters" *ngIf="allTags.length > 0">
      <button class="filter-chip" [class.active]="selectedTag === null" (click)="filterByTag(null)">
        All
      </button>
      <button *ngFor="let tag of allTags; trackBy: trackByTag" class="filter-chip" [class.active]="selectedTag === tag"
        (click)="filterByTag(tag)">
        {{ tag }}
      </button>
    </div>
  </div>

  <div class="blogs__grid">
    <!-- Loading State -->
    <portfolio-loader *ngIf="isLoading" [fullscreen]="true"></portfolio-loader>

    <ng-container *ngFor="let post of filteredBlogs$ | async; trackBy: trackByPost">
      <article class="blog-card" [routerLink]="['/blogs', post.slug]" *ngIf="!isLoading">
        <div class="blog-card__media" [style.background-image]="post.coverImage ? 'url(' + post.coverImage + ')' : null"
          [class.no-image]="!post.coverImage">
          <span class="blog-card__category" *ngIf="post.tags.length > 0">{{ post.tags[0] }}</span>
        </div>
        <div class="blog-card__body">
          <div class="blog-card__meta">
            <span class="blog-card__date">
              <span class="material-icons">calendar_today</span>
              {{ formatDate(post.publishedAt) }}
            </span>
            <span class="blog-card__read-time">
              <span class="material-icons">schedule</span>
              {{ post.readTime }} min read
            </span>
          </div>
          <h2 class="blog-card__title">{{ post.title }}</h2>
          <p class="blog-card__excerpt">{{ post.excerpt }}</p>

          <div class="blog-card__tags">
            <span *ngFor="let tag of post.tags; trackBy: trackByTag" class="tag-chip">
              {{ tag }}
            </span>
          </div>

          <div class="blog-card__cta">
            <span class="read-more">Read article</span>
            <span class="material-icons">arrow_forward</span>
          </div>
        </div>
      </article>
    </ng-container>
  </div>

  <!-- Empty State -->
  <!-- Empty State -->
  <div class="blogs__empty" *ngIf="(filteredBlogs$ | async)?.length === 0">
    <portfolio-empty-state icon="article" title="No blog posts yet"
      message="Check back soon for articles on software development and more.">
    </portfolio-empty-state>
  </div>
</section>