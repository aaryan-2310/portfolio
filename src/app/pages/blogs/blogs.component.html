<section class="blogs-container" [class.spotlight-active]="spotlightActive">
  <!-- Editorial Hero -->
  <header class="blogs-hero" aria-labelledby="blogs-title">
    <div class="hero-backdrop" aria-hidden="true"></div>
    <div class="hero-content">
      <div class="hero-badge">
        <span class="material-icons badge-icon">auto_stories</span>
        <span class="badge-text">Latest Insights</span>
      </div>
      <h1 id="blogs-title" class="hero-title">
        <span class="title-line">{{ header.title }}</span>
      </h1>
      <p class="hero-sub">{{ header.subtitle }}</p>
    </div>
  </header>

  <!-- Shared Search Toolbar -->
  <portfolio-toolbar-search [tags]="allTags" [activeTag]="selectedTag" [resultCount]="resultCount$ | async"
    [placeholderTexts]="placeholderTexts" (searchChange)="onSearch($any($event))" (tagChange)="onTagChange($event)"
    (focusChange)="onFocusChange($event)">
  </portfolio-toolbar-search>

  <!-- Content Grid -->
  <div class="blogs-grid-section">
    <!-- Loader -->
    <portfolio-loader *ngIf="isLoading" [fullscreen]="true"></portfolio-loader>

    <!-- Post Grid -->
    <div class="blogs__grid" *ngIf="!isLoading">
      <ng-container *ngFor="let post of filteredBlogs$ | async; trackBy: trackByPost">
        <portfolio-card *ngFor="let post of filteredBlogs$ | async; trackBy: trackByPost" [title]="post.title"
          [description]="post.excerpt" [image]="post.coverImage" [routerLink]="['/blogs', post.slug]">

          <!-- Category Pill -->
          <span card-media-extra class="blog-card__category" *ngIf="post.tags.length > 0">{{ post.tags[0] }}</span>

          <!-- Footer (Meta + Tags + Action) -->
          <div card-footer>
            <!-- Meta Info (Date/Time) -->
            <div class="blog-card__meta">
              <span class="meta-item">{{ formatDate(post.publishedAt) }}</span>
              <span class="meta-dot">Â·</span>
              <span class="meta-item">{{ post.readTime }} min read</span>
            </div>

            <div class="blog-card__footer">
              <div class="blog-card__tags">
                <span *ngFor="let tag of post.tags.slice(0, 2); trackBy: trackByTag" class="tag-pill">
                  {{ tag }}
                </span>
                <span *ngIf="post.tags.length > 2" class="tag-pill more">+{{ post.tags.length - 2 }}</span>
              </div>

              <span class="read-action">
                Read
                <span class="material-icons">arrow_forward</span>
              </span>
            </div>
          </div>
        </portfolio-card>
      </ng-container>
    </div>

    <!-- Empty State -->
    <div class="blogs__empty" *ngIf="!isLoading && (filteredBlogs$ | async)?.length === 0">
      <portfolio-empty-state icon="article" title="No articles found"
        message="Try adjusting your search or filter to find what you're looking for.">
      </portfolio-empty-state>
    </div>
  </div>
</section>