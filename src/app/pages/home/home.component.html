<!-- Hero Loading State -->
<section id="hero" aria-labelledby="hero-title" *ngIf="(settings$ | async) === null">
  <div class="hero-surface">
    <div class="hero-content">
      <portfolio-skeleton variant="text" width="90%" height="48px" style="margin-top: 1rem;"></portfolio-skeleton>
      <portfolio-skeleton variant="text" width="70%" height="48px" style="margin-top: 0.5rem;"></portfolio-skeleton>
      <portfolio-skeleton variant="text" width="60%" height="20px" style="margin-top: 1.5rem;"></portfolio-skeleton>
      <portfolio-skeleton variant="text" width="50%" height="20px" style="margin-top: 0.5rem;"></portfolio-skeleton>
      <div style="display: flex; gap: 1rem; margin-top: 2rem;">
        <portfolio-skeleton variant="rect" width="160px" height="48px" borderRadius="8px"></portfolio-skeleton>
        <portfolio-skeleton variant="rect" width="120px" height="48px" borderRadius="8px"></portfolio-skeleton>
      </div>
      <div style="display: flex; gap: 2rem; margin-top: 2rem;">
        <portfolio-skeleton variant="text" width="80px" height="40px"></portfolio-skeleton>
        <portfolio-skeleton variant="text" width="80px" height="40px"></portfolio-skeleton>
        <portfolio-skeleton variant="text" width="80px" height="40px"></portfolio-skeleton>
      </div>
    </div>
  </div>
</section>

<!-- Hero Loaded State -->
<section id="hero" aria-labelledby="hero-title" *ngIf="settings$ | async as settings">
  <div class="hero-surface">
    <div class="hero-content">
      <h1 id="hero-title" class="hero-title">
        {{ settings.siteTitle || 'Full-stack engineer for TypeScript/Angular products.' }}
      </h1>
      <p class="hero-sub">
        {{ settings.siteDescription || 'I help startups and scaleups design, build, and ship reliable web apps â€” fast.'
        }}
      </p>

      <div class="hero-buttons">
        <portfolio-button label="View Projects" variant="primary" size="lg" [routerLink]="'/projects'">
          <span icon class="material-icons">north_east</span>
        </portfolio-button>
        <portfolio-button label="Hire me" variant="tonal" size="lg" [routerLink]="'/career'">
          <span icon class="material-icons">person</span>
        </portfolio-button>
      </div>

      <div class="hero-trust">
        <div class="trust-item">
          <span class="trust-value">3+</span>
          <span class="trust-label">Years Experience</span>
        </div>
        <div class="trust-divider"></div>
        <div class="trust-item">
          <span class="trust-value">10+</span>
          <span class="trust-label">Projects Shipped</span>
        </div>
        <div class="trust-divider"></div>
        <div class="trust-item">
          <span class="trust-value">100%</span>
          <span class="trust-label">Client Satisfaction</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Projects Section -->
<section id="featured-projects" class="section" aria-labelledby="featured-title">
  <div class="section-header">
    <h2 id="featured-title" class="section-title">Featured Work</h2>
    <p class="section-sub">A selection of projects I've designed and built.</p>
  </div>

  <div class="projects-grid">
    <!-- Loading State -->
    <ng-container *ngIf="(projects$ | async) === null">
      <portfolio-skeleton *ngFor="let i of [1,2,3]" variant="card" height="300px"></portfolio-skeleton>
    </ng-container>

    <!-- Loaded State -->
    <a *ngFor="let project of projects$ | async; trackBy: trackByProject" class="project-card"
      [routerLink]="project.link">
      <div class="project-media" [style.background]="project.gradient"></div>
      <div class="project-info">
        <h3 class="project-title">{{ project.title }}</h3>
        <p class="project-desc">{{ project.description }}</p>
      </div>
      <span class="project-arrow material-icons">arrow_forward</span>
    </a>
  </div>

  <div class="section-cta">
    <portfolio-button label="View All Projects" variant="secondary" size="md" [routerLink]="'/projects'">
      <span icon class="material-icons">apps</span>
    </portfolio-button>
  </div>
</section>

<!-- What I Do Section -->
<section id="services" class="section" aria-labelledby="services-title">
  <div class="section-header">
    <span class="section-eyebrow">Services</span>
    <h2 id="services-title" class="section-title">What I Do</h2>
    <p class="section-sub">End-to-end development expertise to bring your ideas to life.</p>
  </div>

  <div class="services-grid">
    <!-- Loading State -->
    <ng-container *ngIf="(services$ | async) === null">
      <portfolio-skeleton *ngFor="let i of [1,2,3,4]" variant="card" height="250px"></portfolio-skeleton>
    </ng-container>

    <!-- Loaded State -->
    <ng-container *ngIf="(services$ | async) !== null">
      <div *ngFor="let service of services$ | async; trackBy: trackByService" class="service-card">
        <div class="service-icon-wrapper">
          <span class="material-icons service-icon">{{ service.icon }}</span>
        </div>
        <h3 class="service-title">{{ service.title }}</h3>
        <p class="service-desc">{{ service.description }}</p>
        <div class="service-tags">
          <span *ngFor="let tag of service.tags" class="service-tag">{{ tag }}</span>
        </div>
      </div>
    </ng-container>
  </div>
</section>

<!-- Skills Section -->
<section id="skills" class="section" aria-labelledby="skills-title">
  <div class="section-header">
    <h2 id="skills-title" class="section-title">Tech Stack</h2>
    <p class="section-sub">Technologies I work with daily.</p>
  </div>

  <div class="skills-grid">
    <!-- Loading State -->
    <ng-container *ngIf="(skills$ | async) === null">
      <portfolio-skeleton *ngFor="let i of [1,2,3,4,5,6,7,8]" variant="rect" width="120px" height="40px"
        borderRadius="20px"></portfolio-skeleton>
    </ng-container>

    <!-- Loaded State -->
    <div *ngFor="let skill of skills$ | async; trackBy: trackBySkill" class="skill-chip">
      <ng-container *ngIf="skill.icon">
        <img *ngIf="skill.icon.startsWith('http')" [src]="skill.icon" [alt]="skill.name" class="skill-icon custom" />
        <span *ngIf="!skill.icon.startsWith('http')" class="material-icons skill-icon">{{ skill.icon }}</span>
      </ng-container>
      <span class="skill-name">{{ skill.name }}</span>
    </div>
  </div>
</section>

<!-- Latest Posts Section -->
<section id="latest-posts" class="section" aria-labelledby="posts-title">
  <div class="section-header">
    <span class="section-eyebrow">Blog</span>
    <h2 id="posts-title" class="section-title">Latest Posts</h2>
    <p class="section-sub">Articles and insights on software development.</p>
  </div>

  <div class="posts-grid">
    <!-- Loading State -->
    <ng-container *ngIf="(latestPosts$ | async) === null">
      <portfolio-skeleton *ngFor="let i of [1,2,3]" variant="card" height="350px"></portfolio-skeleton>
    </ng-container>

    <!-- Loaded State -->
    <a *ngFor="let post of latestPosts$ | async; trackBy: trackByPost" class="post-card"
      [routerLink]="['/blogs', post.slug]">
      <div class="post-card__media" [style.background-image]="post.coverImage ? 'url(' + post.coverImage + ')' : null"
        [class.no-image]="!post.coverImage"></div>
      <div class="post-card__body">
        <span class="post-card__date">{{ formatDate(post.publishedAt) }}</span>
        <h3 class="post-card__title">{{ post.title }}</h3>
        <p class="post-card__excerpt">{{ post.excerpt }}</p>
        <span class="post-card__cta">
          Read article <span class="material-icons">arrow_forward</span>
        </span>
      </div>
    </a>
  </div>

  <div class="section-cta">
    <portfolio-button label="View All Posts" variant="secondary" size="md" [routerLink]="'/blogs'">
      <span icon class="material-icons">article</span>
    </portfolio-button>
  </div>
</section>