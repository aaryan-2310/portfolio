<!-- Hero Section -->
<section class="career-hero" aria-labelledby="career-title">
  <div class="hero-backdrop" aria-hidden="true"></div>
  <div class="hero-content">
    <div class="hero-badge">
      <span class="badge-icon material-icons">trending_up</span>
      <span class="badge-text">Professional Journey</span>
    </div>
    <h1 id="career-title" class="hero-title">
      <span class="title-line">Work</span>
      <span class="title-line accent">Experience</span>
    </h1>
    <p class="hero-sub">
      Building impactful products with modern technologies across enterprise and startup
      environments.
    </p>
    <div class="hero-stats">
      <div class="stat-card">
        <span class="stat-value">{{ yearsOfExperience }}+</span>
        <span class="stat-label">Years</span>
      </div>
      <div class="stat-divider" aria-hidden="true"></div>
      <div class="stat-card">
        <span class="stat-value">{{ experienceCount }}</span>
        <span class="stat-label">Companies</span>
      </div>
      <div class="stat-divider" aria-hidden="true"></div>
      <div class="stat-card">
        <span class="stat-value">{{ projectCount }}+</span>
        <span class="stat-label">Projects</span>
      </div>
    </div>
  </div>
  <div class="hero-scroll-hint" aria-hidden="true">
    <span class="material-icons">expand_more</span>
  </div>
</section>

<!-- Timeline Section -->
<section class="timeline-section" aria-label="Career Timeline">
  <div class="section-header">
    <h2 class="section-title">Career Timeline</h2>
    <p class="section-sub">Scroll through my professional journey</p>
  </div>

  <!-- Loading State -->
  <portfolio-loader *ngIf="isLoading" [fullscreen]="true"></portfolio-loader>

  <!-- Mobile Timeline (Cards Layout) -->
  <div class="mobile-timeline">

    <ng-container *ngIf="!isLoading">
      @for (exp of experiences; track exp.id; let i = $index; let isLast = $last) {
      <div class="timeline-item" [class.reveal-active]="revealActive">
        <div class="timeline-connector" [class.last]="isLast">
          <div class="connector-dot">
            @if (exp.logoUrl) {
            <img [src]="exp.logoUrl" [alt]="exp.company" [title]="exp.company + ' logo'" class="connector-logo" />
            } @else {
            <span class="material-icons">work</span>
            }
          </div>
          @if (!isLast) {
          <div class="connector-line"></div>
          }
        </div>
        <div class="timeline-content">
          <portfolio-experience-card [experience]="exp" [index]="i" />
        </div>
      </div>
      }

      <!-- Connect Card -->
      <div class="timeline-item connect-item">
        <div class="timeline-connector last">
          <div class="connector-dot connect-dot">
            <span class="material-icons">handshake</span>
          </div>
        </div>
        <div class="timeline-content">
          <div class="connect-card">
            <div class="connect-header">
              <div class="connect-icon" aria-hidden="true">
                <span class="material-icons">rocket_launch</span>
              </div>
              <div class="connect-text">
                <h3>Ready to Work Together?</h3>
                <p>Let's discuss how I can contribute to your team.</p>
              </div>
            </div>
            <div class="connect-actions">
              <portfolio-button label="GitHub" variant="tonal" [href]="githubUrl" target="_blank">
                <span icon class="material-icons">code</span>
              </portfolio-button>
              <portfolio-button label="LinkedIn" variant="primary" [href]="linkedinUrl" target="_blank">
                <span icon class="material-icons">link</span>
              </portfolio-button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>

  <!-- Desktop Stepper -->
  <div class="desktop-stepper">
    <mat-vertical-stepper #stepper class="custom-stepper" [linear]="false" [class.reveal-active]="revealActive"
      (selectionChange)="replayReveal()">
      @for (exp of experiences; track exp.id; let i = $index) {
      <mat-step [label]="exp.company" [state]="exp.state || ''">
        <div class="work-experience-container">
          <portfolio-experience-card [experience]="exp" [index]="i" />
        </div>
      </mat-step>
      }

      <mat-step>
        <ng-template matStepLabel>Let's Connect</ng-template>
        <mat-card class="connect-card-desktop">
          <mat-card-content>
            <div class="connect-content-wrapper">
              <div class="connect-icon-large" aria-hidden="true">
                <span class="material-icons">rocket_launch</span>
              </div>
              <div class="connect-info">
                <h3>Ready to Work Together?</h3>
                <p>
                  Explore my full professional background and let's discuss how I can contribute to
                  your team.
                </p>
              </div>
            </div>
            <div class="external-links">
              <portfolio-button label="GitHub Profile" variant="tonal" [href]="githubUrl" target="_blank">
                <span icon class="material-icons">code</span>
              </portfolio-button>
              <portfolio-button label="LinkedIn Profile" variant="primary" [href]="linkedinUrl" target="_blank">
                <span icon class="material-icons">link</span>
              </portfolio-button>
            </div>
          </mat-card-content>

          <mat-card-actions>
            <div class="step-actions">
              <button mat-button matStepperPrevious>
                <mat-icon>arrow_back</mat-icon>
                Previous
              </button>
              <button mat-button (click)="stepper.reset()">
                <mat-icon>refresh</mat-icon>
                Start Over
              </button>
            </div>
          </mat-card-actions>
        </mat-card>
      </mat-step>

      <ng-container *ngFor="let exp of experiences">
        <ng-template matStepperIcon="current">
          <ng-container *ngIf="exp.logoUrl; else defaultIcon">
            <img [src]="exp.logoUrl" [alt]="exp.company" [title]="exp.company + ' logo'" width="16"
              class="stepper-company-icon" />
          </ng-container>
          <ng-template #defaultIcon>
            <mat-icon class="stepper-company-icon">work</mat-icon>
          </ng-template>
        </ng-template>
      </ng-container>
    </mat-vertical-stepper>
  </div>
</section>

<!-- CTA Section -->
<section class="cta-section" aria-labelledby="cta-title">
  <div class="cta-content">
    <div class="cta-badge">
      <span class="material-icons">favorite</span>
    </div>
    <h2 id="cta-title">Interested in working together?</h2>
    <p>I'm always open to discussing new opportunities and exciting projects.</p>
    <div class="cta-buttons">
      <portfolio-button label="Hire Me" variant="primary" size="lg" [routerLink]="'/about'">
        <span icon class="material-icons">mail</span>
      </portfolio-button>
      <portfolio-button label="View Projects" variant="tonal" size="lg" [routerLink]="'/projects'">
        <span icon class="material-icons">north_east</span>
      </portfolio-button>
    </div>
  </div>
</section>