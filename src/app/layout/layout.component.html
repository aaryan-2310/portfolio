<div class="layout-container">
  <!-- Modern Navbar -->
  <header class="navbar" [class.scrolled]="isScrolled">
    <div class="navbar-inner">
      <!-- Logo -->
      <a class="navbar-logo" routerLink="/home" aria-label="Go to home">
        <img ngSrc="assets/logo/aryan-logo.svg" width="120" height="32" priority alt="Aryan Mishra" class="logo-img" />
      </a>

      <!-- Desktop Navigation -->
      <nav class="navbar-nav desktop-only" aria-label="Main navigation">
        <a class="nav-link" routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
          Home
        </a>
        <a class="nav-link" routerLink="/about" routerLinkActive="active">
          About
        </a>
        <a class="nav-link" routerLink="/projects" routerLinkActive="active">
          Projects
        </a>
        <a class="nav-link" routerLink="/career" routerLinkActive="active">
          Experience
        </a>
        <a class="nav-link" routerLink="/contact" routerLinkActive="active">
          Contact
        </a>
      </nav>

      <!-- Right Side Actions -->
      <div class="navbar-actions">
        <!-- Availability Badge -->
        <button class="avail-badge" type="button" [class.readonly]="!isOwner"
          [attr.aria-pressed]="availableForFreelance" (click)="toggleAvailability()" [disabled]="!isOwner"
          [class.pulse]="badgePulse">
          <span class="avail-dot" [class.available]="availableForFreelance"></span>
          <span class="avail-label desktop-only">{{ availableForFreelance ? 'Available' : 'Booked' }}</span>
        </button>

        <!-- Theme Toggle -->
        <button class="theme-toggle" (click)="toggleTheme()"
          [attr.aria-label]="getCurrentTheme() === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'"
          type="button">
          <mat-icon>{{ getCurrentTheme() }}_mode</mat-icon>
        </button>

        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle mobile-only" (click)="mobileMenuOpen = !mobileMenuOpen"
          [attr.aria-expanded]="mobileMenuOpen" aria-label="Toggle navigation menu" type="button">
          <span class="hamburger" [class.open]="mobileMenuOpen">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </span>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" [class.open]="mobileMenuOpen" (click)="mobileMenuOpen = false"></div>

  <!-- Mobile Slide-in Menu -->
  <aside class="mobile-menu" [class.open]="mobileMenuOpen" aria-label="Mobile navigation"
    [cdkTrapFocus]="mobileMenuOpen" cdkTrapFocusAutoCapture>
    <nav class="mobile-nav">
      <a class="mobile-nav-link" routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
        (click)="mobileMenuOpen = false">
        <mat-icon>home</mat-icon>
        <span>Home</span>
      </a>
      <a class="mobile-nav-link" routerLink="/about" routerLinkActive="active" (click)="mobileMenuOpen = false">
        <mat-icon>person</mat-icon>
        <span>About</span>
      </a>
      <a class="mobile-nav-link" routerLink="/projects" routerLinkActive="active" (click)="mobileMenuOpen = false">
        <mat-icon>apps</mat-icon>
        <span>Projects</span>
      </a>
      <a class="mobile-nav-link" routerLink="/career" routerLinkActive="active" (click)="mobileMenuOpen = false">
        <mat-icon>work</mat-icon>
        <span>Experience</span>
      </a>
      <a class="mobile-nav-link" routerLink="/contact" routerLinkActive="active" (click)="mobileMenuOpen = false">
        <mat-icon>mail</mat-icon>
        <span>Contact</span>
      </a>
    </nav>

    <div class="mobile-menu-footer">
      <button class="mobile-theme-toggle" (click)="toggleTheme()" type="button">
        <mat-icon>{{ getCurrentTheme() }}_mode</mat-icon>
        <span>{{ getCurrentTheme() === 'dark' ? 'Light Mode' : 'Dark Mode' }}</span>
      </button>
    </div>
  </aside>

  <main class="content" id="main">
    <router-outlet></router-outlet>
  </main>

  <!-- Mobile sticky CTA -->
  <div class="sticky-cta">
    <portfolio-button label="Get in Touch" variant="primary" size="lg" [routerLink]="'/contact'" ariaLabel="Contact me">
      <span icon class="material-icons">mail</span>
    </portfolio-button>
  </div>

  <portfolio-footer></portfolio-footer>
</div>