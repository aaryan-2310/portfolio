<div class="layout-container">
  <mat-toolbar class="navbar">
    <a class="logo" routerLink="/home" aria-label="Go to home">
      <img ngSrc="assets/logo/aryan-logo.svg" width="120" height="32" priority alt="Aryan Mishra - Code Crafted"
        class="logo-img" />
    </a>

    <!-- Desktop Menu -->
    <div class="nav-links desktop-menu">
      <a mat-button routerLink="/home" routerLinkActive="active">
        <mat-icon>home</mat-icon>
        <span>Home</span>
      </a>
      <a mat-button routerLink="/about" routerLinkActive="active">
        <mat-icon>person</mat-icon>
        <span>About</span>
      </a>
      <a mat-button routerLink="/projects" routerLinkActive="active">
        <mat-icon>apps</mat-icon>
        <span>Projects</span>
      </a>
      <a mat-button routerLink="/career" routerLinkActive="active">
        <mat-icon>work</mat-icon>
        <span>Experience</span>
      </a>
      <a mat-button routerLink="/contact" routerLinkActive="active">
        <mat-icon>mail</mat-icon>
        <span>Contact</span>
      </a>

      <div id="right-side">
        <button class="avail-badge" type="button" role="switch" [class.readonly]="!isOwner"
          [attr.aria-checked]="availableForFreelance" [aria-checked]="availableForFreelance ? 'true' : 'false'"
          (click)="isOwner && toggleAvailability()" mat-button [class.pulse]="badgePulse">
          <span class="dot" [class.on]="availableForFreelance"></span>
          <span class="label">{{ availableForFreelance ? 'Available' : 'Booked' }}</span>
        </button>
        <button mat-icon-button (click)="toggleTheme()" aria-label="Toggle theme" id="theme-toggle-button">
          <mat-icon>{{ getCurrentTheme() }}_mode</mat-icon>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->

    <!-- Mobile Menu Button with aria-label and higher z-index -->
    <button mat-icon-button [matMenuTriggerFor]="menu" class="mobile-menu-button" aria-label="Open navigation menu">
      <mat-icon>menu</mat-icon>
    </button>

    <mat-menu #menu="matMenu" [overlapTrigger]="false" yPosition="below" xPosition="after" class="mobile-nav-menu">
      <button mat-menu-item [disabled]="!isOwner" (click)="toggleAvailability()">
        <span class="avail-badge">
          <span class="dot" [class.on]="availableForFreelance"></span>
          <span class="label">{{ availableForFreelance ? 'Available' : 'Booked' }}</span>
        </span>
      </button>
      <a mat-menu-item routerLink="/home" routerLinkActive="active">
        <mat-icon>home</mat-icon>
        <span>Home</span>
      </a>
      <a mat-menu-item routerLink="/about" routerLinkActive="active">
        <mat-icon>person</mat-icon>
        <span>About</span>
      </a>
      <a mat-menu-item routerLink="/projects" routerLinkActive="active">
        <mat-icon>apps</mat-icon>
        <span>Projects</span>
      </a>
      <a mat-menu-item routerLink="/career" routerLinkActive="active">
        <mat-icon>work</mat-icon>
        <span>Experience</span>
      </a>
      <a mat-menu-item routerLink="/contact" routerLinkActive="active">
        <mat-icon>mail</mat-icon>
        <span>Contact</span>
      </a>
      <a mat-menu-item (click)="toggleTheme()">
        <mat-icon>{{ getCurrentTheme() }}_mode</mat-icon>
        <span>Toggle Theme</span>
      </a>
    </mat-menu>
  </mat-toolbar>

  <main class="content" id="main">
    <router-outlet></router-outlet>
  </main>

  <!-- Mobile sticky CTA -->
  <div class="sticky-cta">
    <portfolio-button label="Get in Touch" variant="primary" size="lg" [routerLink]="'/contact'" ariaLabel="Contact me">
      <span icon class="material-icons">mail</span>
    </portfolio-button>
  </div>

  <portfolio-footer></portfolio-footer>
</div>